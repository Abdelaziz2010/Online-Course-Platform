
# EduPlatform - Learning Management System (LMS) API 

[![.NET](https://img.shields.io/badge/.NET-9.0-512BD4?logo=dotnet)](https://dotnet.microsoft.com/)
[![SQL Server](https://img.shields.io/badge/SQL_Server-2019+-CC2927?logo=microsoft-sql-server)](https://www.microsoft.com/sql-server)
[![Stripe](https://img.shields.io/badge/Stripe-626CD9?logo=stripe&logoColor=white)](https://stripe.com)
[![Entity Framework](https://img.shields.io/badge/Entity_Framework_Core-9.0-6DB33F?logo=ef&logoColor=white)](https://docs.microsoft.com/ef/)
[![Postman](https://img.shields.io/badge/Postman-API-orange?logo=postman)](https://www.postman.com/)
[![Swagger](https://img.shields.io/badge/Swagger-UI-85EA2D?logo=swagger)](https://swagger.io/)
[![AutoMapper](https://img.shields.io/badge/AutoMapper-9.0-FF6F00?logo=automapper&logoColor=white)](https://automapper.org/)
[![Serilog](https://img.shields.io/badge/Serilog-Logging-2B2E3A?logo=serilog&logoColor=white)](https://serilog.net/)
[![SendGrid](https://img.shields.io/badge/SendGrid-Email-21A7FF?logo=sendgrid&logoColor=white)](https://sendgrid.com/)
[![Health Check](https://img.shields.io/badge/Health_Check-Healthy-44cc11?logo=heartbeat&logoColor=white)](https://learn.microsoft.com/aspnet/core/host-and-deploy/health-checks)


[![Azure](https://img.shields.io/badge/Azure-Cloud-0078D4?logo=microsoft-azure&logoColor=white)](https://azure.microsoft.com/)
[![Azure AD B2C](https://img.shields.io/badge/Azure_AD_B2C-Identity-0078D4?logo=microsoft-azure&logoColor=white)](https://learn.microsoft.com/azure/active-directory-b2c/)
[![Azure SQL](https://img.shields.io/badge/Azure_SQL-Database-0078D4?logo=microsoftazure&logoColor=white)](https://azure.microsoft.com/products/azure-sql/)
[![Azure Blob Storage](https://img.shields.io/badge/Azure_Blob_Storage-Storage-0078D4?logo=microsoftazure&logoColor=white)](https://azure.microsoft.com/products/storage/blobs/)
[![Azure Functions](https://img.shields.io/badge/Azure_Functions-Serverless-0062AD?logo=azure-functions&logoColor=white)](https://azure.microsoft.com/products/functions/)
[![Azure DevOps](https://img.shields.io/badge/Azure_DevOps-CI/CD-0078D7?logo=azure-devops&logoColor=white)](https://azure.microsoft.com/services/devops/)
[![Azure Web App](https://img.shields.io/badge/Azure_Web_App-Hosting-0078D4?logo=microsoft-azure&logoColor=white)](https://azure.microsoft.com/products/app-service/)
[![Application Insights](https://img.shields.io/badge/Application_Insights-Monitoring-68217A?logo=microsoft-azure&logoColor=white)](https://azure.microsoft.com/products/monitor/)


---

## Project Mind Map:
![Image](https://github.com/user-attachments/assets/2d55079a-8120-474c-9418-5b5b69346db7)

---

## Database Diagram:
![Image](https://github.com/user-attachments/assets/163354bb-d024-420e-9dd8-79b578d81f82)

---

## Glimpse of the working solution:
![Image](https://github.com/user-attachments/assets/ed9e607c-8bdf-412a-85b7-49ad0f6cbaad)

![Image](https://github.com/user-attachments/assets/a84314c9-c59c-42d4-a9f0-fb06edbfff69)

![Image](https://github.com/user-attachments/assets/8d1aaa4f-c548-44eb-bfad-b4ea41d70b4b)

![Image](https://github.com/user-attachments/assets/f0501918-8b7a-48a4-a74b-7935e9173108)

![Image](https://github.com/user-attachments/assets/9d7f24eb-60d6-4cff-adf6-6e517743c626)

![Image](https://github.com/user-attachments/assets/6ff02f9a-e01b-4893-af5d-85a6a454cc47)

![Image](https://github.com/user-attachments/assets/61083146-c1b3-4d14-8424-a58e9fff1840)

![Image](https://github.com/user-attachments/assets/3fce10c9-f273-4f44-ade4-23baca39c89c)

![Image](https://github.com/user-attachments/assets/d474b6d0-57e5-4b94-8971-d1adcf2da527)

---

## ☁️ Azure Services Proof

Below are screenshots showing the Azure resources created and configured during development:

*Note: These resources were created for development and testing purposes and have been deleted after project completion.*


| Subscription | Resource Group |
|--------------|----------------|
| <img src="https://github.com/user-attachments/assets/79dfd7a4-792f-40b3-acd8-97add2e3b74e" width="500"/> | <img src="https://github.com/user-attachments/assets/c91bc5a4-fdc0-4355-a428-30e5cad90b07" width="500"/> |

| Database Server | Azure SQL Database |
|-----------------|--------------------|
| <img src="https://github.com/user-attachments/assets/aa681b29-701c-47b3-89c8-0f0bb114af15" width="500"/> | <img src="https://github.com/user-attachments/assets/fd56f062-d334-4f9a-9dcc-12aa9f37e65c" width="500"/> |

| Storage Account | Blob Storage Container |
|-----------------|------------------------|
| <img src="https://github.com/user-attachments/assets/aca825ec-4a7e-421a-a41e-0be462064f04" width="500"/> | <img src="https://github.com/user-attachments/assets/90b3666c-767c-409b-933e-085054ca0be3" width="500"/> |

| Azure Function App with 4 triggers | Web App Service for hosting the Backend |
|------------------------------------|-----------------------------------------|
| <img src="https://github.com/user-attachments/assets/a534a740-3dee-4923-a604-b248d65735ee" width="500"/> | <img src="https://github.com/user-attachments/assets/d872b980-f109-40df-9cd5-b0c8f988559a" width="500"/> |

| Web App Service for hosting the Frontend | Application Insights for monitoring and logging |
|------------------------------------------|-------------------------------------------------|
| <img src="https://github.com/user-attachments/assets/c9456c88-ef3c-4b32-bd74-79c39f65149f" width="500"/> | <img src="https://github.com/user-attachments/assets/5383f6e4-1493-47d2-8684-6d8b526d81dc" width="500"/> |

| Application Insights Logs | App Insights Server Requests |
|---------------------------|------------------------------|
| <img src="https://github.com/user-attachments/assets/3c50c6a0-9f88-4810-b77a-e971f5a1dbfd" width="500"/> | <img src="https://github.com/user-attachments/assets/bfb215a9-8dfe-4ecd-803f-efdea012ef8e" width="500"/> |

| App Insights Failed Requests |
|------------------------------|
| <img src="https://github.com/user-attachments/assets/7050b375-a345-4489-a4a8-dd1a0aeb01b1" width="500"/> |


---

## 🚀 Project Overview

- **EduPlatform** is a Learning Management System (LMS) designed to simplify and enhance the online education experience 
for both students and instructors. Educators can easily create and manage courses, 
while students can browse, enroll in, and complete courses at their own pace.

---


## ✨ Key Features

- **User Management:** Secure registration, authentication, and profile management via Azure AD B2C.
- **Course Management:** Instructors can create courses with multiple sessions, including videos.
- **Enrollment & Payment:** Students enroll in courses and pay securely using Stripe.
- **Notifications & Emails:** Automated email notifications for updates, payments via SendGrid.
- **Content Delivery:** Live and on-demand video sessions via Azure Blob Storage.
- **Monitoring & Logging:** Application Insights and Serilog for diagnostics and monitoring.
- **Security:** Secrets and sensitive data managed with Environment Variables.
- **Scalability:** Hosted on Azure Web App with CI/CD via Azure DevOps.
- **API Documentation:** Interactive API docs with Swagger.

---


### Application Workflow:

1. **Authentication & Authorization:**
   - User logs in via Azure AD B2C.
   - System reads UserRole to determine what they can access (Admin, Instructor, Student).
	
2. **Course Management (Instructor):**
   - Instructors create and manage courses.
   - Instructor can create/edit courses: select category, set price, seats, dates.
   - Instructor uploads sessions (video URLs) in order VideoOrder.

3. **Course Discovery (Student):**
   - Students can search for courses by keywords or browse by category.
   - Course Category is used to filter courses.
   - Students can view course details: description, price, instructor bio, sessions list.

4. **Enrollment & Payment:**
   - Student clicks “Enroll”; creates an Enrollment record with status “Pending.”
   - Payment form submits → Payment record is created with status “Pending”.
   - Payment processing is handled through a secure Payment gateway.
   - Enrollment status is updated based on payment confirmation.
   - On gateway callback, payment status updated to “Completed” or “Failed.”
   - Enrollment status is synchronized to match payment.

5. **Feedback Loop:**
   - Students can leave reviews and ratings for courses (1–5 stars + comments).
   - Instructors can view feedback and ratings to improve course material.

6. **Video Requests:**
   - Any user may fill out a VideoRequest form for new video content.
   - Instructors review requests, respond via the Response field, and attach produced video URLs.


---


### What Students Can Do:

- Register and log in using Azure AD B2C.

- Browse courses by category or search keywords.

- View course details: instructor bio, session outline, price, capacity.

- Enroll in courses (triggers enrollment/payment flow).

- Leave reviews and ratings after/during courses.

- Submit video requests for new topics.

- Receive notifications for course updates, payment confirmations.


### What Instructors Can Do:

- Register and log in using Azure AD B2C.

- Maintain personal bio linked to their user profile.

- Create/Edit courses: title, type, price, dates, seat counts.

- Upload session content in order (video URL, titles, descriptions).

- Review student enrollments and payment statuses.

- Monitor reviews left on their courses.

- Fulfill video requests: fill in responses and attach new content links.



---


## Technologies Stack

- **Backend:** .NET Core 9 with Entity Framework Core 9  

- **Database:** Azure SQL Server  

- **Authentication & Authorization:** Azure AD B2C  

- **Cloud Storage:** Azure Storage Account(Azure Blob Storage) for media files (images & videos)

- **Caching:** In-Memory Cache  

- **Logging:** Serilog 

- **Monitoring:** Application Insights 

- **Emails and Notifications:** SendGrid  

- **Deployment:** Azure Web App  

- **Serverless Functions:** Azure Functions for specific tasks 

- **CI/CD Pipeline:** Azure DevOps (create CI pipeline to build the app)

- **API Documentation:** Swagger

- **Object Mapping:** AutoMapper

- **Payment Gateway:** Stripe


---


## 🏛️ Project Architecture

EduPlatform is built using the **Clean Architecture** approach, which ensures separation of concerns, maintainability, and testability. 
The solution is organized into four main layers:

1. **Presentation Layer**  
   - Contains the API controllers and handles HTTP requests/responses.
   - Responsible for input validation and returning appropriate results to clients.

2. **Application Layer**  
   - Contains business logic, service and repository interfaces, and DTOs.
   - Defines contracts for repositories and services, and orchestrates application workflows.

3. **Domain Layer**  
   - Contains core business entities.
   - Represents the heart of the business logic, independent of external dependencies.

4. **Infrastructure Layer**  
   - Implements repository and service interfaces.
   - Handles data access (using Entity Framework Core), external service integration (e.g., SendGrid, Stripe, Azure).

### Key Architectural Patterns

- **Repository Pattern:**  
  Abstracts data access logic and provides a clean API for data operations. Each entity has a corresponding repository interface and implementation.

- **Unit of Work Pattern:**  
  Coordinates the work of multiple repositories by managing transactions and saving changes as a single unit. This ensures data consistency and integrity.

- **Service Layer:**  
  Encapsulates business logic and coordinates between repositories and controllers. Services are injected via dependency injection and promote code reusability and testability.

### Benefits

- **Separation of Concerns:** Each layer has a clear responsibility, making the codebase easier to understand and maintain.
- **Testability:** Business logic and data access are decoupled, enabling effective unit and integration testing.
- **Scalability:** The architecture supports future growth and integration with new technologies or services.


---


## Integrations with Other Services
- **Azure AD B2C:** For user authentication and authorization.
- **Azure SQL Server:** For relational database management and data storage.
- **Azure Blob Storage:** For storing media files like images and videos.
- **SendGrid:** For sending email notifications when a video request is added or updated in VideoRequest table in database.
- **Stripe:** For secure payment processing.
- **Application Insights:** For monitoring application performance and user behavior.
- **Serilog:** For structured logging and diagnostics.
- **Azure DevOps:** For source code management, CI/CD pipelines.
- **Azure Web App:** For hosting the application in a scalable and managed environment.
- **Azure Function App:** For running multiple Azure Functions For Background Jobs and serverless computing tasks.
- **Health Check:** For monitoring the health of the application and its dependencies and to check the Liveness and Readiness.


---


## ⚡ Azure Functions Integration

EduPlatform leverages Azure Functions for serverless and background processing tasks. 
The Azure Functions project is deployed separately and integrates seamlessly with the main platform.

**Deployed Functions:**

| Function Name                    | Trigger Type | Purpose/Description                                                         |
|----------------------------------|--------------|-----------------------------------------------------------------------------|
| SignUpValidation                 | HTTP         | Handles user sign-up validation logic.                                      |
| UpdateUserProfile                | HTTP         | Updates user profile information asynchronously.                            |
| VideoRequestTrigger              | SQL Trigger  | Listens for database changes and sends confirmation emails to users.        |
| SendVideoRequestAckEmailToUser   | HTTP         | Sends acknowledgment emails to users for video requests, given a request ID |

<img src="https://github.com/user-attachments/assets/a534a740-3dee-4923-a604-b248d65735ee" width="500"/>

**Key Points:**
- Functions are triggered by HTTP requests or database changes (SQL Trigger).
- Decouples background jobs and event-driven logic from the main API.
- Improves scalability and maintainability of the platform.

*For more details, see the [Azure Functions Project Repository](https://github.com/Abdelaziz2010/Online-Course-Platform-Functions).*


--- 


## 📚 API Documentation:

### 📦 Categories Controller (`/api/Categories`)
| Method | Endpoint                                         | Description                  |
|--------|--------------------------------------------------|------------------------------|
| GET    | `/api/Categories/Get-Category-By-Id/{id}`        | Get category by ID           |
| GET    | `/api/Categories/Get-All-Categories`             | Get all categories           |

---

### 📩 Contact Controller (`/api/Contact`)
| Method | Endpoint                               | Description             |
|--------|----------------------------------------|-------------------------|
| POST   | `/api/Contact/Send-Message`            | Send a contact message  |

---

### 🎓 Courses Controller (`/api/Courses`)
| Method | Endpoint                                                          | Description                  |
|--------|-------------------------------------------------------------------|------------------------------|
| GET    | `/api/Courses/Get-All-Courses`                                    | Get all courses              |
| GET    | `/api/Courses/Get-All-Courses-By-Category/{categoryId}`           | Get courses by category ID   |
| GET    | `/api/Courses/Get-Course-Details-By-Id/{courseId}`                | Get course details by ID     |
| POST   | `/api/Courses/Create-Course`                                      | Create a new course          |
| PUT    | `/api/Courses/Update-Course/{id}`                                 | Update course by ID          |
| POST   | `/api/Courses/Upload-Thumbnail/{courseId}`                        | Upload course thumbnail      |
| POST   | `/api/Courses/Upload-Session-Video/{sessionId}`                   | Upload session video         |
| DELETE | `/api/Courses/Delete-Course/{id}`                                 | Delete course by ID          |
| GET    | `/api/Courses/Get-All-Instructors`                                | Get all instructors          |

---

### 🎟️ Enrollments Controller (`/api/Enrollments`)
| Method | Endpoint                                                             | Description                  |
|--------|----------------------------------------------------------------------|------------------------------|
| GET    | `/api/Enrollments/Get-Enrollment-By-Id/{enrollmentId}`               | Get enrollment by ID         |
| GET    | `/api/Enrollments/Get-User-Enrollments/{userId}`                     | Get enrollments by user ID   |
| GET    | `/api/Enrollments/Get-Course-Enrollment/{courseId}`                  | Get enrollments by course ID |
| POST   | `/api/Enrollments/Create-Enrollment`                                 | Create new enrollment        |
| PUT    | `/api/Enrollments/Update-Enrollment/{enrollmentId}`                  | Update enrollment by ID      |
| DELETE | `/api/Enrollments/Delete-Enrollment/{enrollmentId}`                  | Delete enrollment by ID      |

---

### ❤️ HealthCheck Controller (`/api/health`)
| Method | Endpoint              | Description             |
|--------|-----------------------|-------------------------|
| GET    | `/api/health`         | General health check    |
| GET    | `/api/health/live`    | Liveness probe          |
| GET    | `/api/health/ready`   | Readiness probe         |

---

### 💳 Payments Controller (`/api/Payments`)
| Method | Endpoint                    | Description              |
|--------|-----------------------------|--------------------------|
| POST   | `/api/Payments/Webhook`     | Stripe payment webhook   |

---

### ⭐ Reviews Controller (`/api/Reviews`)
| Method | Endpoint                                                   | Description                |
|--------|------------------------------------------------------------|----------------------------|
| GET    | `/api/Reviews/Get-Review-By-Id/{reviewId}`                 | Get review by ID           |
| GET    | `/api/Reviews/Get-Reviews-By-Course/{courseId}`            | Get reviews by course ID   |
| GET    | `/api/Reviews/Get-Reviews-By-User/{userId}`                | Get reviews by user ID     |
| POST   | `/api/Reviews/Create-Review`                               | Create new review          |
| PUT    | `/api/Reviews/Update-Review/{reviewId}`                    | Update review by ID        |
| DELETE | `/api/Reviews/Delete-Review/{reviewId}`                    | Delete review by ID        |

---

### 👤 User Profile Controller (`/api/UserProfile`)
| Method | Endpoint                                           | Description                  |
|--------|----------------------------------------------------|------------------------------|
| GET    | `/api/UserProfile/Get-User-Info/{userId}`          | Get user info by ID          |
| PUT    | `/api/UserProfile/Update-Profile-Picture`          | Update profile picture       |
| PUT    | `/api/UserProfile/Update-Profile-Bio`              | Update profile bio           |

---

### 📹 Video Requests Controller (`/api/VideoRequests`)
| Method | Endpoint                                                             | Description                   |
|--------|----------------------------------------------------------------------|-------------------------------|
| GET    | `/api/VideoRequests/Get-All-Video-Requests`                          | Get all video requests        |
| GET    | `/api/VideoRequests/Get-Video-Request-By-Id/{id}`                    | Get video request by ID       |
| GET    | `/api/VideoRequests/Get-Video-Requests-By-User-Id/{userId}`          | Get video requests by user ID |
| POST   | `/api/VideoRequests/Create-Video-Request`                            | Create new video request      |
| PUT    | `/api/VideoRequests/Update-Video-Request/{id}`                       | Update video request by ID    |
| DELETE | `/api/VideoRequests/Delete-Video-Request/{id}`                       | Delete video request by ID    |


---


## Under Construction:

- **Unit-Testing**: Using XUnit to test the project to enhance the security.

---


## 📝 Request/Response Examples: 
*Sample Course Creation Request:*

```json
POST /api/Courses/Create-Course 
Authorization: Bearer <your-jwt-token> 
Content-Type: application/json 
{
  "title": "Data Science Masterclass",
  "description": "Deep dive into Data Science using Python.",
  "price": 399.99,
  "courseType": "Online",
  "seatsAvailable": 30,
  "duration": 40,
  "categoryId": 3,
  "instructorId": 4,
  "startDate": "2025-09-10T08:00:00",
  "endDate": "2025-10-10T17:00:00",
  "sessionDetails": [
    {
      "title": "Python for Data Analysis",
      "description": "Numpy, Pandas basics",
      "videoOrder": 1
    },
    {
      "title": "Data Visualization",
      "description": "Matplotlib, Seaborn plotting",
      "videoOrder": 2
    },
    {
      "title": "Machine Learning Basics",
      "description": "Intro to Scikit-Learn",
      "videoOrder": 3
    },
    {
      "title": "Real World Projects",
      "description": "End-to-end Data Science projects",
      "videoOrder": 4
    }
  ]
}
```

*Sample Response:*

```json
Status: 200 Ok
Response: 
{
  "courseId": 44,
  "sessionIds": [
    50,
    51,
    52,
    53
  ]
}
```

---

## 🚀 Getting Started
1. Clone the repository
2. Configure database connection in `appsettings.json`
3. Run migrations: `dotnet ef database update`
4. Start the API: `dotnet run`


---

## Links
- **Project Repository: https://github.com/Abdelaziz2010/Online-Course-Platform**

- **Azure Functions Project Repository: https://github.com/Abdelaziz2010/Online-Course-Platform-Functions**
